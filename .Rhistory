HEI2015_TOTALPRO, HEI2015_SEAPLANTPRO, HEI2015_WHOLEGRAIN, HEI2015_DAIRY,
HEI2015_FATTYACID, HEI2015_REFINEDGRAIN, HEI2015_SODIUM, HEI2015_ADDEDSUGAR,
HEI2015_SATFAT)
}
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
HEI2015_BLOCK(raw_data_and_result)
AARP_DATA = fread("/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Diet score/dietaryindex_package/Version_control/NCI HEI SAS code/AARP/HEI2015_RESULTS.csv")
HEI2015_AARP(AARP_DATA)
#' DII_BLOCK Calculation
#'
#' Calculate the DII dietary index (serving size based) per 1 day
#' @param RAW_DATA The raw data file that includes results and raw data of the dietary assessment
#' @return The DII index/score and its components
#' @examples
#' DII_BLOCK(RAW_DATA)
#' @export
DII_BLOCK = function(RAW_DATA){
#Serving size calculation for DII
COHORT = RAW_DATA %>%
mutate(
VITB12 = DT_VB12,
VITB6 = DT_VITB6,
BCAROTENE = DT_BCARO,
CAFFEINE = DT_CAFFN/1000,
CARB = DT_CARB,
CHOLES = DT_CHOL,
KCAL = DT_KCAL,
TOTALFAT = DT_TFAT,
FIBER = DT_FIBE,
FOLICACID = DT_FOLAC,
IRON = DT_IRON,
MG = DT_MAGN,
MUFA = DT_MFAT,
NIACIN = DT_NIAC,
N3FAT = DT_TOTN3,
N6FAT = DT_TOTN6,
PROTEIN = DT_PROT,
PUFA = DT_PFAT,
RIBOFLAVIN = DT_RIBO,
SATFAT = DT_SFAT,
SE = DT_SEL,
THIAMIN = DT_THIA,
TRANSFAT = DT_TRFAT,
VITA = DT_VARAE,
VITC = DT_VITC,
VITD = DT_VITD*0.025,
VITE = DT_ATOC,
ZN = DT_ZINC,
TEA = foodfreq(ICEDTEAFREQ)*ICEDTEAQUAN*240 + foodfreq(HOTTEAFREQ)*HOTTEAQUAN*240,
ISOFLAVONES = DT_ISOFLV
) %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, TOTALFAT, FIBER, FOLICACID,
IRON, MG, MUFA, NIACIN, N3FAT, N6FAT, PROTEIN, PUFA, RIBOFLAVIN, SATFAT, SE, THIAMIN, VITA,
VITC, VITD, VITE, ZN)
COHORT = COHORT %>%
pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
Variable = c("ALCOHOL", "VITB12", "VITB6", "BCAROTENE", "CAFFEINE", "CARB", "CHOLES", "KCAL", "EUGENOL",
"TOTALFAT", "FIBER", "FOLICACID","GARLIC", "GINGER","IRON", "MG", "MUFA", "NIACIN", "N3FAT", "N6FAT","ONION", "PROTEIN", "PUFA",
"RIBOFLAVIN","SAFFRON", "SATFAT", "SE", "THIAMIN","TRANSFAT","TURMERIC", "VITA","VITC", "VITD", "VITE", "ZN", "TEA",
"FLA3OL","FLAVONES","FLAVONOLS","FLAVONONES","ANTHOC","ISOFLAVONES","PEPPER","THYME","ROSEMARY")
Overall_inflammatory_score = c(-0.278, 0.106, -0.365, -0.584, -0.11, 0.097, 0.11, 0.18, -0.14, 0.298, -0.663, -0.19, -0.412, -0.453, 0.032, -0.484, -0.009,
-0.246, -0.436, -0.159, -0.301, 0.021, -0.337, -0.068, -0.14, 0.373, -0.191, -0.098,0.229,-0.785, -0.401, -0.424, -0.446, -0.419, -0.313,
-0.536,-0.415,-0.616,-0.467,-0.25,-0.131,-0.593,-0.131,-0.102,-0.013)
Global_mean = c(13.98,5.15,1.47,3718,8.05,272.2,279.4,2056,0.01,71.4,18.8,273,4.35,59,13.35,310.1,27,25.9,1.06,10.8,35.9,
79.4,13.88,1.7,0.37,28.6,67,1.7,3.15,533.6,983.9,118.2,6.26,8.73,9.84,
1.69,95.8,1.55,17.7,11.7,18.05,1.2,10,0.33,1)
SD = c(3.72,2.7,0.74,1720,6.67,40,51.2,338,0.08,19.4,4.9,70.7,2.9,63.2,3.71,139.4,6.1,11.77,1.06,7.5,18.4,13.9,3.76,0.79,1.78,
8,25.1,0.66,3.75,754.3,518.6,43.46,2.21,1.49,2.19,
1.53,85.9,0.07,6.79,3.82,21.14,0.2,7.07,0.99,15)
DII_STD = data.frame(Variable, Overall_inflammatory_score, Global_mean, SD)
#Score calculation for DII
COHORT %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL = sum(IND_DII_SCORE))
}
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
DII_BLOCK(raw_data_and_result)
#' DII_BLOCK Calculation
#'
#' Calculate the DII dietary index (serving size based) per 1 day
#' @param RAW_DATA The raw data file that includes results and raw data of the dietary assessment
#' @return The DII index/score and its components
#' @examples
#' DII_BLOCK(RAW_DATA)
#' @export
DII_BLOCK = function(RAW_DATA){
#Serving size calculation for DII
COHORT = RAW_DATA %>%
mutate(
ALCOHOL = A_BEV,
VITB12 = DT_VB12,
VITB6 = DT_VITB6,
BCAROTENE = DT_BCARO,
CAFFEINE = DT_CAFFN/1000,
CARB = DT_CARB,
CHOLES = DT_CHOL,
KCAL = DT_KCAL,
TOTALFAT = DT_TFAT,
FIBER = DT_FIBE,
FOLICACID = DT_FOLAC,
IRON = DT_IRON,
MG = DT_MAGN,
MUFA = DT_MFAT,
NIACIN = DT_NIAC,
N3FAT = DT_TOTN3,
N6FAT = DT_TOTN6,
PROTEIN = DT_PROT,
PUFA = DT_PFAT,
RIBOFLAVIN = DT_RIBO,
SATFAT = DT_SFAT,
SE = DT_SEL,
THIAMIN = DT_THIA,
TRANSFAT = DT_TRFAT,
VITA = DT_VARAE,
VITC = DT_VITC,
VITD = DT_VITD*0.025,
VITE = DT_ATOC,
ZN = DT_ZINC,
TEA = foodfreq(ICEDTEAFREQ)*ICEDTEAQUAN*240 + foodfreq(HOTTEAFREQ)*HOTTEAQUAN*240,
ISOFLAVONES = DT_ISOFLV
)
COHORT1 = COHORT %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE,CAFFEINE,CARB,CHOLES,KCAL,TOTALFAT,FIBER,FOLICACID,
IRON,MG,MUFA,NIACIN,N3FAT,N6FAT,PROTEIN,PUFA,RIBOFLAVIN,SATFAT,SE,THIAMIN,TRANSFAT,
VITA,VITC,VITD,VITE,ZN,TEA,ISOFLAVONES)
COHORT2 = COHORT %>%
select(RESPONDENTID, VITB12, VITB6, BCAROTENE,CAFFEINE,CARB,CHOLES,KCAL,TOTALFAT,FIBER,FOLICACID,
IRON,MG,MUFA,NIACIN,N3FAT,N6FAT,PROTEIN,PUFA,RIBOFLAVIN,SATFAT,SE,THIAMIN,TRANSFAT,
VITA,VITC,VITD,VITE,ZN,TEA,ISOFLAVONES)
COHORT1 = COHORT1 %>%
pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
COHORT2 = COHORT2 %>%
pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
Variable = c("ALCOHOL", "VITB12", "VITB6", "BCAROTENE", "CAFFEINE", "CARB", "CHOLES", "KCAL", "EUGENOL",
"TOTALFAT", "FIBER", "FOLICACID","GARLIC", "GINGER","IRON", "MG", "MUFA", "NIACIN", "N3FAT", "N6FAT","ONION", "PROTEIN", "PUFA",
"RIBOFLAVIN","SAFFRON", "SATFAT", "SE", "THIAMIN","TRANSFAT","TURMERIC", "VITA","VITC", "VITD", "VITE", "ZN", "TEA",
"FLA3OL","FLAVONES","FLAVONOLS","FLAVONONES","ANTHOC","ISOFLAVONES","PEPPER","THYME","ROSEMARY")
Overall_inflammatory_score = c(-0.278, 0.106, -0.365, -0.584, -0.11, 0.097, 0.11, 0.18, -0.14, 0.298, -0.663, -0.19, -0.412, -0.453, 0.032, -0.484, -0.009,
-0.246, -0.436, -0.159, -0.301, 0.021, -0.337, -0.068, -0.14, 0.373, -0.191, -0.098,0.229,-0.785, -0.401, -0.424, -0.446, -0.419, -0.313,
-0.536,-0.415,-0.616,-0.467,-0.25,-0.131,-0.593,-0.131,-0.102,-0.013)
Global_mean = c(13.98,5.15,1.47,3718,8.05,272.2,279.4,2056,0.01,71.4,18.8,273,4.35,59,13.35,310.1,27,25.9,1.06,10.8,35.9,
79.4,13.88,1.7,0.37,28.6,67,1.7,3.15,533.6,983.9,118.2,6.26,8.73,9.84,
1.69,95.8,1.55,17.7,11.7,18.05,1.2,10,0.33,1)
SD = c(3.72,2.7,0.74,1720,6.67,40,51.2,338,0.08,19.4,4.9,70.7,2.9,63.2,3.71,139.4,6.1,11.77,1.06,7.5,18.4,13.9,3.76,0.79,1.78,
8,25.1,0.66,3.75,754.3,518.6,43.46,2.21,1.49,2.19,
1.53,85.9,0.07,6.79,3.82,21.14,0.2,7.07,0.99,15)
DII_STD = data.frame(Variable, Overall_inflammatory_score, Global_mean, SD)
#Score calculation for DII
DII_ALL_df = COHORT1 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL = sum(IND_DII_SCORE))
DII_ALL_NOETOH_df = COHORT2 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL_NOETOH = sum(IND_DII_SCORE))
inner_join(DII_ALL_df, DII_ALL_NOETOH_df, by="RESPONDENTID")
}
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
DII_BLOCK(raw_data_and_result)
#' DII_BLOCK Calculation
#'
#' Calculate the DII dietary index (serving size based) per 1 day
#' @param RAW_DATA The raw data file that includes results and raw data of the dietary assessment
#' @return The DII index/score and its components
#' @examples
#' DII_BLOCK(RAW_DATA)
#' @export
DII_BLOCK = function(RAW_DATA){
#Serving size calculation for DII
COHORT = RAW_DATA %>%
mutate(
ALCOHOL = A_BEV,
VITB12 = DT_VB12,
VITB6 = DT_VITB6,
BCAROTENE = DT_BCARO,
CAFFEINE = DT_CAFFN/1000,
CARB = DT_CARB,
CHOLES = DT_CHOL,
KCAL = DT_KCAL,
TOTALFAT = DT_TFAT,
FIBER = DT_FIBE,
FOLICACID = DT_FOLAC,
IRON = DT_IRON,
MG = DT_MAGN,
MUFA = DT_MFAT,
NIACIN = DT_NIAC,
N3FAT = DT_TOTN3,
N6FAT = DT_TOTN6,
PROTEIN = DT_PROT,
PUFA = DT_PFAT,
RIBOFLAVIN = DT_RIBO,
SATFAT = DT_SFAT,
SE = DT_SEL,
THIAMIN = DT_THIA,
TRANSFAT = DT_TRFAT,
VITA = DT_VARAE,
VITC = DT_VITC,
VITD = DT_VITD*0.025,
VITE = DT_ATOC,
ZN = DT_ZINC,
TEA = foodfreq(ICEDTEAFREQ)*ICEDTEAQUAN*240 + foodfreq(HOTTEAFREQ)*HOTTEAQUAN*240,
ISOFLAVONES = DT_ISOFLV
)
COHORT1 = COHORT %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE,CAFFEINE,CARB,CHOLES,KCAL,TOTALFAT,FIBER,FOLICACID,
IRON,MG,MUFA,NIACIN,N3FAT,N6FAT,PROTEIN,PUFA,RIBOFLAVIN,SATFAT,SE,THIAMIN,TRANSFAT,
VITA,VITC,VITD,VITE,ZN,TEA,ISOFLAVONES)
COHORT2 = COHORT %>%
select(RESPONDENTID, VITB12, VITB6, BCAROTENE,CAFFEINE,CARB,CHOLES,KCAL,TOTALFAT,FIBER,FOLICACID,
IRON,MG,MUFA,NIACIN,N3FAT,N6FAT,PROTEIN,PUFA,RIBOFLAVIN,SATFAT,SE,THIAMIN,TRANSFAT,
VITA,VITC,VITD,VITE,ZN,TEA,ISOFLAVONES)
COHORT1 = COHORT1 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
COHORT2 = COHORT2 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
Variable = c("ALCOHOL", "VITB12", "VITB6", "BCAROTENE", "CAFFEINE", "CARB", "CHOLES", "KCAL", "EUGENOL",
"TOTALFAT", "FIBER", "FOLICACID","GARLIC", "GINGER","IRON", "MG", "MUFA", "NIACIN", "N3FAT", "N6FAT","ONION", "PROTEIN", "PUFA",
"RIBOFLAVIN","SAFFRON", "SATFAT", "SE", "THIAMIN","TRANSFAT","TURMERIC", "VITA","VITC", "VITD", "VITE", "ZN", "TEA",
"FLA3OL","FLAVONES","FLAVONOLS","FLAVONONES","ANTHOC","ISOFLAVONES","PEPPER","THYME","ROSEMARY")
Overall_inflammatory_score = c(-0.278, 0.106, -0.365, -0.584, -0.11, 0.097, 0.11, 0.18, -0.14, 0.298, -0.663, -0.19, -0.412, -0.453, 0.032, -0.484, -0.009,
-0.246, -0.436, -0.159, -0.301, 0.021, -0.337, -0.068, -0.14, 0.373, -0.191, -0.098,0.229,-0.785, -0.401, -0.424, -0.446, -0.419, -0.313,
-0.536,-0.415,-0.616,-0.467,-0.25,-0.131,-0.593,-0.131,-0.102,-0.013)
Global_mean = c(13.98,5.15,1.47,3718,8.05,272.2,279.4,2056,0.01,71.4,18.8,273,4.35,59,13.35,310.1,27,25.9,1.06,10.8,35.9,
79.4,13.88,1.7,0.37,28.6,67,1.7,3.15,533.6,983.9,118.2,6.26,8.73,9.84,
1.69,95.8,1.55,17.7,11.7,18.05,1.2,10,0.33,1)
SD = c(3.72,2.7,0.74,1720,6.67,40,51.2,338,0.08,19.4,4.9,70.7,2.9,63.2,3.71,139.4,6.1,11.77,1.06,7.5,18.4,13.9,3.76,0.79,1.78,
8,25.1,0.66,3.75,754.3,518.6,43.46,2.21,1.49,2.19,
1.53,85.9,0.07,6.79,3.82,21.14,0.2,7.07,0.99,15)
DII_STD = data.frame(Variable, Overall_inflammatory_score, Global_mean, SD)
#Score calculation for DII
DII_ALL_df = COHORT1 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL = sum(IND_DII_SCORE))
DII_ALL_NOETOH_df = COHORT2 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL_NOETOH = sum(IND_DII_SCORE))
inner_join(DII_ALL_df, DII_ALL_NOETOH_df, by="RESPONDENTID")
}
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
DII_BLOCK(raw_data_and_result)
DII_BLOCK = function(SERV_DATA, RESPONDENTID,ALCOHOL=NULL, VITB12=NULL, VITB6=NULL, BCAROTENE=NULL, CAFFEINE=NULL, CARB=NULL, CHOLES=NULL, KCAL=NULL, EUGENOL=NULL,
TOTALFAT=NULL, FIBER=NULL, FOLICACID=NULL,GARLIC=NULL, GINGER,IRON=NULL, MG=NULL, MUFA=NULL, NIACIN=NULL,
N3FAT=NULL, N6FAT=NULL,ONION=NULL, PROTEIN=NULL, PUFA=NULL,
RIBOFLAVIN=NULL,SAFFRON=NULL, SATFAT=NULL, SE=NULL, THIAMIN=NULL,TRANSFAT=NULL,TURMERIC=NULL, VITA=NULL,
VITC=NULL, VITD=NULL, VITE=NULL, ZN=NULL, TEA=NULL,
FLA3OL=NULL,FLAVONES=NULL,FLAVONOLS=NULL,FLAVONONES=NULL,ANTHOC=NULL,ISOFLAVONES=NULL,PEPPER=NULL,THYME=NULL,ROSEMARY=NULL){
COHORT1 = SERV_DATA %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT2 = SERV_DATA %>%
select(RESPONDENTID, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT1 = COHORT1 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
COHORT2 = COHORT2 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
DII_BLOCK = function(SERV_DATA, RESPONDENTID,ALCOHOL=NULL, VITB12=NULL, VITB6=NULL, BCAROTENE=NULL, CAFFEINE=NULL, CARB=NULL, CHOLES=NULL, KCAL=NULL, EUGENOL=NULL,
TOTALFAT=NULL, FIBER=NULL, FOLICACID=NULL,GARLIC=NULL, GINGER,IRON=NULL, MG=NULL, MUFA=NULL, NIACIN=NULL,
N3FAT=NULL, N6FAT=NULL,ONION=NULL, PROTEIN=NULL, PUFA=NULL,
RIBOFLAVIN=NULL,SAFFRON=NULL, SATFAT=NULL, SE=NULL, THIAMIN=NULL,TRANSFAT=NULL,TURMERIC=NULL, VITA=NULL,
VITC=NULL, VITD=NULL, VITE=NULL, ZN=NULL, TEA=NULL,
FLA3OL=NULL,FLAVONES=NULL,FLAVONOLS=NULL,FLAVONONES=NULL,ANTHOC=NULL,ISOFLAVONES=NULL,PEPPER=NULL,THYME=NULL,ROSEMARY=NULL){
COHORT1 = SERV_DATA %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT2 = SERV_DATA %>%
select(RESPONDENTID, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT1 = COHORT1 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
COHORT2 = COHORT2 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
DII_BLOCK = function(SERV_DATA, RESPONDENTID,ALCOHOL=NULL, VITB12=NULL, VITB6=NULL, BCAROTENE=NULL, CAFFEINE=NULL, CARB=NULL, CHOLES=NULL, KCAL=NULL, EUGENOL=NULL,
TOTALFAT=NULL, FIBER=NULL, FOLICACID=NULL,GARLIC=NULL, GINGER,IRON=NULL, MG=NULL, MUFA=NULL, NIACIN=NULL,
N3FAT=NULL, N6FAT=NULL,ONION=NULL, PROTEIN=NULL, PUFA=NULL,
RIBOFLAVIN=NULL,SAFFRON=NULL, SATFAT=NULL, SE=NULL, THIAMIN=NULL,TRANSFAT=NULL,TURMERIC=NULL, VITA=NULL,
VITC=NULL, VITD=NULL, VITE=NULL, ZN=NULL, TEA=NULL,
FLA3OL=NULL,FLAVONES=NULL,FLAVONOLS=NULL,FLAVONONES=NULL,ANTHOC=NULL,ISOFLAVONES=NULL,PEPPER=NULL,THYME=NULL,ROSEMARY=NULL){
COHORT1 = SERV_DATA %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT2 = SERV_DATA %>%
select(RESPONDENTID, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT1 = COHORT1 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
COHORT2 = COHORT2 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
Variable = c("ALCOHOL", "VITB12", "VITB6", "BCAROTENE", "CAFFEINE", "CARB", "CHOLES", "KCAL", "EUGENOL",
"TOTALFAT", "FIBER", "FOLICACID","GARLIC", "GINGER","IRON", "MG", "MUFA", "NIACIN", "N3FAT", "N6FAT","ONION", "PROTEIN", "PUFA",
"RIBOFLAVIN","SAFFRON", "SATFAT", "SE", "THIAMIN","TRANSFAT","TURMERIC", "VITA","VITC", "VITD", "VITE", "ZN", "TEA",
"FLA3OL","FLAVONES","FLAVONOLS","FLAVONONES","ANTHOC","ISOFLAVONES","PEPPER","THYME","ROSEMARY")
Overall_inflammatory_score = c(-0.278, 0.106, -0.365, -0.584, -0.11, 0.097, 0.11, 0.18, -0.14, 0.298, -0.663, -0.19, -0.412, -0.453, 0.032, -0.484, -0.009,
-0.246, -0.436, -0.159, -0.301, 0.021, -0.337, -0.068, -0.14, 0.373, -0.191, -0.098,0.229,-0.785, -0.401, -0.424, -0.446, -0.419, -0.313,
-0.536,-0.415,-0.616,-0.467,-0.25,-0.131,-0.593,-0.131,-0.102,-0.013)
Global_mean = c(13.98,5.15,1.47,3718,8.05,272.2,279.4,2056,0.01,71.4,18.8,273,4.35,59,13.35,310.1,27,25.9,1.06,10.8,35.9,
79.4,13.88,1.7,0.37,28.6,67,1.7,3.15,533.6,983.9,118.2,6.26,8.73,9.84,
1.69,95.8,1.55,17.7,11.7,18.05,1.2,10,0.33,1)
SD = c(3.72,2.7,0.74,1720,6.67,40,51.2,338,0.08,19.4,4.9,70.7,2.9,63.2,3.71,139.4,6.1,11.77,1.06,7.5,18.4,13.9,3.76,0.79,1.78,
8,25.1,0.66,3.75,754.3,518.6,43.46,2.21,1.49,2.19,
1.53,85.9,0.07,6.79,3.82,21.14,0.2,7.07,0.99,15)
DII_STD = data.frame(Variable, Overall_inflammatory_score, Global_mean, SD)
#Score calculation for DII
DII_ALL_df = COHORT1 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL = sum(IND_DII_SCORE))
DII_ALL_NOETOH_df = COHORT2 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL_NOETOH = sum(IND_DII_SCORE))
inner_join(DII_ALL_df, DII_ALL_NOETOH_df, by="RESPONDENTID")
}
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
COHORT = raw_data_and_result %>%
mutate(
ALCOHOL = A_BEV,
VITB12 = DT_VB12,
VITB6 = DT_VITB6,
BCAROTENE = DT_BCARO,
CAFFEINE = DT_CAFFN/1000,
CARB = DT_CARB,
CHOLES = DT_CHOL,
KCAL = DT_KCAL,
TOTALFAT = DT_TFAT,
FIBER = DT_FIBE,
FOLICACID = DT_FOLAC,
IRON = DT_IRON,
MG = DT_MAGN,
MUFA = DT_MFAT,
NIACIN = DT_NIAC,
N3FAT = DT_TOTN3,
N6FAT = DT_TOTN6,
PROTEIN = DT_PROT,
PUFA = DT_PFAT,
RIBOFLAVIN = DT_RIBO,
SATFAT = DT_SFAT,
SE = DT_SEL,
THIAMIN = DT_THIA,
TRANSFAT = DT_TRFAT,
VITA = DT_VARAE,
VITC = DT_VITC,
VITD = DT_VITD*0.025,
VITE = DT_ATOC,
ZN = DT_ZINC,
TEA = foodfreq(ICEDTEAFREQ)*ICEDTEAQUAN*240 + foodfreq(HOTTEAFREQ)*HOTTEAQUAN*240,
ISOFLAVONES = DT_ISOFLV
)
DII(COHORT, RESPONDENTID, ALCOHOL, VITB12, VITB6)
DII = function(SERV_DATA, RESPONDENTID,ALCOHOL=NULL, VITB12=NULL, VITB6=NULL, BCAROTENE=NULL, CAFFEINE=NULL, CARB=NULL, CHOLES=NULL, KCAL=NULL, EUGENOL=NULL,
TOTALFAT=NULL, FIBER=NULL, FOLICACID=NULL,GARLIC=NULL, GINGER,IRON=NULL, MG=NULL, MUFA=NULL, NIACIN=NULL,
N3FAT=NULL, N6FAT=NULL,ONION=NULL, PROTEIN=NULL, PUFA=NULL,
RIBOFLAVIN=NULL,SAFFRON=NULL, SATFAT=NULL, SE=NULL, THIAMIN=NULL,TRANSFAT=NULL,TURMERIC=NULL, VITA=NULL,
VITC=NULL, VITD=NULL, VITE=NULL, ZN=NULL, TEA=NULL,
FLA3OL=NULL,FLAVONES=NULL,FLAVONOLS=NULL,FLAVONONES=NULL,ANTHOC=NULL,ISOFLAVONES=NULL,PEPPER=NULL,THYME=NULL,ROSEMARY=NULL){
COHORT1 = SERV_DATA %>%
select(RESPONDENTID, ALCOHOL, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT2 = SERV_DATA %>%
select(RESPONDENTID, VITB12, VITB6, BCAROTENE, CAFFEINE, CARB, CHOLES, KCAL, EUGENOL,
TOTALFAT, FIBER, FOLICACID,GARLIC, GINGER,IRON, MG, MUFA, NIACIN, N3FAT, N6FAT,ONION, PROTEIN, PUFA,
RIBOFLAVIN,SAFFRON, SATFAT, SE, THIAMIN,TRANSFAT,TURMERIC, VITA,VITC, VITD, VITE, ZN, TEA,
FLA3OL,FLAVONES,FLAVONOLS,FLAVONONES,ANTHOC,ISOFLAVONES,PEPPER,THYME,ROSEMARY)
COHORT1 = COHORT1 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
COHORT2 = COHORT2 %>%
tidyr::pivot_longer(-RESPONDENTID, names_to="Variable", values_to="Value")
Variable = c("ALCOHOL", "VITB12", "VITB6", "BCAROTENE", "CAFFEINE", "CARB", "CHOLES", "KCAL", "EUGENOL",
"TOTALFAT", "FIBER", "FOLICACID","GARLIC", "GINGER","IRON", "MG", "MUFA", "NIACIN", "N3FAT", "N6FAT","ONION", "PROTEIN", "PUFA",
"RIBOFLAVIN","SAFFRON", "SATFAT", "SE", "THIAMIN","TRANSFAT","TURMERIC", "VITA","VITC", "VITD", "VITE", "ZN", "TEA",
"FLA3OL","FLAVONES","FLAVONOLS","FLAVONONES","ANTHOC","ISOFLAVONES","PEPPER","THYME","ROSEMARY")
Overall_inflammatory_score = c(-0.278, 0.106, -0.365, -0.584, -0.11, 0.097, 0.11, 0.18, -0.14, 0.298, -0.663, -0.19, -0.412, -0.453, 0.032, -0.484, -0.009,
-0.246, -0.436, -0.159, -0.301, 0.021, -0.337, -0.068, -0.14, 0.373, -0.191, -0.098,0.229,-0.785, -0.401, -0.424, -0.446, -0.419, -0.313,
-0.536,-0.415,-0.616,-0.467,-0.25,-0.131,-0.593,-0.131,-0.102,-0.013)
Global_mean = c(13.98,5.15,1.47,3718,8.05,272.2,279.4,2056,0.01,71.4,18.8,273,4.35,59,13.35,310.1,27,25.9,1.06,10.8,35.9,
79.4,13.88,1.7,0.37,28.6,67,1.7,3.15,533.6,983.9,118.2,6.26,8.73,9.84,
1.69,95.8,1.55,17.7,11.7,18.05,1.2,10,0.33,1)
SD = c(3.72,2.7,0.74,1720,6.67,40,51.2,338,0.08,19.4,4.9,70.7,2.9,63.2,3.71,139.4,6.1,11.77,1.06,7.5,18.4,13.9,3.76,0.79,1.78,
8,25.1,0.66,3.75,754.3,518.6,43.46,2.21,1.49,2.19,
1.53,85.9,0.07,6.79,3.82,21.14,0.2,7.07,0.99,15)
DII_STD = data.frame(Variable, Overall_inflammatory_score, Global_mean, SD)
#Score calculation for DII
DII_ALL_df = COHORT1 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL = sum(IND_DII_SCORE))
DII_ALL_NOETOH_df = COHORT2 %>%
inner_join(DII_STD, by=c("Variable")) %>%
mutate(
Z_SCORE = (Value - Global_mean)/SD,
PERCENTILE = pnorm(Z_SCORE)*2 - 1,
IND_DII_SCORE = PERCENTILE*Overall_inflammatory_score) %>%
group_by(RESPONDENTID) %>%
summarize(DII_ALL_NOETOH = sum(IND_DII_SCORE))
inner_join(DII_ALL_df, DII_ALL_NOETOH_df, by="RESPONDENTID")
}
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
COHORT = raw_data_and_result %>%
mutate(
ALCOHOL = A_BEV,
VITB12 = DT_VB12,
VITB6 = DT_VITB6,
BCAROTENE = DT_BCARO,
CAFFEINE = DT_CAFFN/1000,
CARB = DT_CARB,
CHOLES = DT_CHOL,
KCAL = DT_KCAL,
TOTALFAT = DT_TFAT,
FIBER = DT_FIBE,
FOLICACID = DT_FOLAC,
IRON = DT_IRON,
MG = DT_MAGN,
MUFA = DT_MFAT,
NIACIN = DT_NIAC,
N3FAT = DT_TOTN3,
N6FAT = DT_TOTN6,
PROTEIN = DT_PROT,
PUFA = DT_PFAT,
RIBOFLAVIN = DT_RIBO,
SATFAT = DT_SFAT,
SE = DT_SEL,
THIAMIN = DT_THIA,
TRANSFAT = DT_TRFAT,
VITA = DT_VARAE,
VITC = DT_VITC,
VITD = DT_VITD*0.025,
VITE = DT_ATOC,
ZN = DT_ZINC,
TEA = foodfreq(ICEDTEAFREQ)*ICEDTEAQUAN*240 + foodfreq(HOTTEAFREQ)*HOTTEAQUAN*240,
ISOFLAVONES = DT_ISOFLV
)
DII(COHORT, RESPONDENTID, ALCOHOL, VITB12, VITB6)
setwd("~/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Diet score/dietaryindex_package/dietaryindex")
library(roxygen2); # Read in the roxygen2 R package
roxygenise();      # Builds the help files
roxygenise();      # Builds the help files
devtools::install_github("jamesjiadazhan/dietaryindex")
library(dietaryindex)
devtools::install_github("jamesjiadazhan/dietaryindex")
dietaryindex
if (!requireNamespace("BiocManager"))
install.packages("BiocManager")
BiocManager::install()
library(dietaryindex)
#Import data
raw_data_path <- "/Users/yan/Desktop/Emory University - Ph.D./Research rotation/Microbiome research/Data/Dietary data/data-2022-05-03-16-48-28-rand-1807/diet-raw-and-results_cleaned.csv"
raw_data_and_result <- fread(raw_data_path)
DII_BLOCK(raw_data_and_result)
